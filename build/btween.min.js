// btween.js - http://github.com/patr1k/btween.js
'use strict';var BTWEEN=BTWEEN||function(){var h=[];return{VERSION:0.1,add:function(f){h.push(f)},update:function(){if(0===h.length)return!1;for(var f=0,g=h.length;f<g;)h[f].update()?f++:(h.splice(f,1),g--);return!0}}}();
BTWEEN.Btween=function(h){var f=h,g=[],i,l,j,m=0,n=[],k=0,p,q,r=!1;this.addCurve=function(a,e){var c=g.length;g[c]=[];l=a.length;for(var b=0;b<a.length;b++)0==b&&0==c&&(i=Object.keys(a[b]).length),g[c].push(a[b]);n[c]=void 0===e?1E3:e;return this};this.start=function(){BTWEEN.add(this);j=Date.now();return this};this.delay=function(a){m=a;return this};this.update=function(){var a=Date.now();if(a<j+m)return!0;if(a>j+m+n[k]){if(k==g.length-1)return!1===r&&void 0!==q&&(q.call(f),r=!0),!1;k++;j=Date.now()}f=
this._runEquation(g[k]);void 0!==p&&p.call(f);return!0};this.onUpdate=function(a){p=a;return this};this.onComplete=function(a){q=a;return this};this._getProgress=function(){return(Date.now()-(j+m))/n[k]};this._runEquation=function(a){var e,c,b,d=this._getProgress();2==l?(e=this._curveLinear(a[0].x,a[1].x,d),c=this._curveLinear(a[0].y,a[1].y,d),3==i&&(b=this._curveLinear(a[0].z,a[1].z,d))):3==l?(e=this._curveQuadratic(a[0].x,a[1].x,a[2].x,d),c=this._curveQuadratic(a[0].y,a[1].y,a[2].y,d),3==i&&(b=
this._curveQuadratic(a[0].z,a[1].z,a[2].z,d))):4==l&&(e=this._curveCubic(a[0].x,a[1].x,a[2].x,a[3].x,d),c=this._curveCubic(a[0].y,a[1].y,a[2].y,a[3].y,d),3==i&&(b=this._curveCubic(a[0].z,a[1].z,a[2].z,a[3].z,d)));a={x:e,y:c};3==i&&(a.z=b);return a};this._curveLinear=function(a,e,c){return(1-c)*a+c*e};this._curveQuadratic=function(a,e,c,b){return Math.pow(1-b,2)*a+2*(1-b)*b*e+Math.pow(b,2)*c};this._curveCubic=function(a,e,c,b,d){return Math.pow(1-d,3)*a+3*Math.pow(1-d,2)*d*e+3*(1-d)*Math.pow(d,2)*
c+Math.pow(d,3)*b}};
